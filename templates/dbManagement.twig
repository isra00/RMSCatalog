{% extends "base.twig" %}

{% block content %}

	<section class="main db-management">

		{% if error is defined and error is not empty %}
		<div class="notify error">
			<strong>{% trans %}The Database was NOT updated:{% endtrans %}</strong><br>
			{{ error }}
		</div>
		{% endif %}

		{% if success is defined and success is not empty  %}
		<div class="notify success">
			{{ success }}
		</div>
		{% endif %}

		<h2>{% trans %}Library Database management{% endtrans %}</h2>

		<div class="col50">
			<h3>{% trans %}Current Database file{% endtrans %}</h3>

			<div class="file-details">
				<strong>{{ uploadedDb.name }}</strong><br>
				<time>{{ uploadedDb.mTime|date("r") }}</time><br>
				{{ (uploadedDb.size / 1000)|round(2) }} kB<br>
			</div>

			<div class="small">
				<h3>{% trans %}Cache files <small>(automatically generated)</small>{% endtrans %}</h3>
				<p>
					<strong>{{ cacheCatalog.name }}</strong><br>
					<time>{{ cacheCatalog.mTime|date("r") }}</time><br>
					{{ (cacheCatalog.size / 1000)|round(2) }} kB<br>
				</p>
				<p>
					<strong>{{ cacheClassification.name }}</strong><br>
					<time>{{ cacheClassification.mTime|date("r") }}</time><br>
					{{ (cacheClassification.size / 1000)|round(2) }} kB<br>
				</p>
			</div>
		</div>

		<form class="col50" method="post" action="{{ global.request.baseUrl }}/db" enctype="multipart/form-data">
			<h3>{% trans %}Upload new version{% endtrans %}</h3>
			<em class="warning">{% trans %}Warning: uploading a new version will delete the old one!{% endtrans %}</em>
			<input type="file" name="upload">
			<p><button type="submit" name="sent">{% trans %}Upload{% endtrans %}</button></p>
		</form>

	</section>

{% endblock %}